{% extends "base.html" %}

{% block title %}我的订单{% endblock %}

{% block content %}
<style type="text/css">
  .order-btn{
    position: absolute;
    top: 30px;
    right: 40px;
  }
  .excel-btn{
    position: absolute;
    top: 30px;
    right: 140px;
  }
  #orderXls{
    position: absolute;
    top: 35px;
    right: 200px;
  }
</style>

<div class="m-banner"></div>
<div class="container m-main">
	<h3>我的订单</h3>
  <a href="/order/add/"><div class="btn btn-primary order-btn" id="j-order-btn">我要下单</div></a>
  <form enctype="multipart/form-data" action="/order/import" method="POST">
    <input type="file" name="orderXls" id="orderXls"/>
    <input class="btn btn-success excel-btn" type="submit" id="j-submit-btn" value="批量导入">
  </form>

  {% if reminder == '' %}
  	<table class="table table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>订单编号</th>
          <th>配送编号</th>
          <th>开始配送时间</th>
          <th>操作人</th>
          <th>操作人联系方式</th>
          <th>订单状态</th>
        </tr>
      </thead>
      <tbody>
        {% for order in order_list%}
          <tr>
            <th scope="row">{{ order.start_index}}</th>
            <td>{{order.order_id}}</td>
            <td><a href="/order/{{order.deliver_id}}">{{order.deliver_id}}</a></td>
            <td>{{order.start_time}}</td>
            <td>{{order.operator.name}}</td>
            <td>{{order.operator.phone}}</td>
            <td>{{order.status}}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
    <!-- 第一种分页显示方式 -->
    <ul class="pagination">
      {# orders.paginator.page_range 这个函数返回包含一个所有页码数的 range 对象 #}
      {# 即 range(1, orders.paginator.num_pages + 1) #}
      {% for page_number in orders.paginator.page_range %}
        {% ifequal page_number  orders.number %}
          <li class="active"><a href="?page={{ page_number }}">{{ page_number }}</a></li>
        {% else %}
          <li><a href="?page={{ page_number }}">{{ page_number }}</a></li>
        {% endifequal %}
      {% endfor %}
    </ul>

  {% else %}
    <p>{{reminder}}</p>
  {% endif %}
</div>
{% endblock %}
